<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading Post...</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <h1 class="logo"><a href="index.html">IYAOAA</a></h1>
</header>

<main class="layout">
  <section class="content" id="post-container">
    <p>Loading post...</p>
  </section>

  <!-- Sidebar -->
  <aside class="sidebar">
    <h3>Categories</h3>
    <ul id="category-list" class="category-list"></ul>
  </aside>
</main>

<script>
  // ===== Load Post by ID =====
  const params = new URLSearchParams(window.location.search);
  const postId = params.get('id');

  fetch('data/posts.json')
    .then(res => res.json())
    .then(posts => {
      const post = posts.find(p => p.id === postId);
      const container = document.getElementById('post-container');

      if (!post) {
        container.innerHTML = `<p>Post not found.</p>`;
        return;
      }

      // Render post directly
      container.innerHTML = `
        <article class="post-full">
          <img src="${post.image}" alt="${post.title}" class="post-image">
          <h1 class="post-title">${post.title}</h1>
          <p class="post-meta">Posted on ${new Date(post.date).toDateString()} â€¢ by Ibrahim</p>
          <div class="post-body">${post.body}</div>
        </article>
      `;
    })
    .catch(err => console.error('Error loading post:', err));

  // ===== Sidebar Categories =====
  fetch('data/posts.json')
    .then(res => res.json())
    .then(posts => {
      const allCategories = new Set();
      posts.forEach(post => {
        if (post.categories) post.categories.forEach(cat => allCategories.add(cat));
      });

      const categoryList = document.getElementById('category-list');
      categoryList.innerHTML = Array.from(allCategories)
        .map(cat => `<li><a href="#">${cat}</a></li>`)
        .join('');
    });
</script>


</body>
</html>
